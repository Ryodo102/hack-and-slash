{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/main.js"],"names":[],"mappings":"AAAA;ACAA;;;;;;AAEA,IAAM,SAAS,SAAS,cAAT,CAAwB,mBAAxB,CAAf;;AAEA;AACA,IAAM,eAAe,MAAI,CAAzB;AACA,IAAM,aAAa,EAAnB;;IAEM,Q;AACF,sBAAY,MAAZ,EAAoB;AAAA;;AAChB,aAAK,MAAL,GAAc,MAAd;AACA,aAAK,GAAL,GAAW,OAAO,UAAP,CAAkB,IAAlB,CAAX;AACA,aAAK,QAAL,GAAgB,KAAhB;;AAEA,aAAK,QAAL,GAAgB,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAhB;AACA,aAAK,YAAL,GAAoB,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAApB;AACA,aAAK,aAAL,GAAqB,KAAK,GAAL,EAArB;AACA,aAAK,GAAL,GAAW,CAAX;AACH;;;;uCAEc;AACX,iBAAK,KAAL,GAAa,OAAO,WAApB;AACA,iBAAK,MAAL,GAAc,OAAO,YAArB;;AAEA,iBAAK,MAAL,CAAY,KAAZ,GAAoB,KAAK,KAAzB;AACA,iBAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,MAA1B;;AAEA,gBAAI,OAAO,MAAX,EAAmB;AACf,oBAAM,QAAQ,KAAK,KAAL,GAAa,KAAK,MAAhC;;AAEA,oBAAI,QAAQ,YAAZ,EAA0B;AACtB;AACA,yBAAK,KAAL,GAAa,eAAe,KAAK,MAAjC;AACH,iBAHD,MAGO;AACH;AACA,yBAAK,MAAL,GAAc,KAAK,KAAL,GAAa,YAA3B;AACH;AACJ;AACJ;;;mCAEU;AACP,iBAAK,OAAL;;AAEA,iBAAK,GAAL,CAAS,SAAT,GAAqB,wBAArB;AACA,iBAAK,GAAL,CAAS,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B;AACA,iBAAK,GAAL,CAAS,QAAT,CAAkB,aAAW,YAAX,GAA0B,CAA5C,EAA+C,aAAa,CAA5D,EAA+D,CAA/D,EAAkE,CAAlE;;AAGA,iBAAK,QAAL;;AAEA,gBAAI,CAAC,KAAK,QAAV,EAAoB;AAChB,uBAAO,qBAAP,CAA6B,KAAK,QAAlC;AACH,aAFD,MAEO;AACH,qBAAK,QAAL,GAAgB,KAAhB;AACH;AACJ;;;kCAES;AACN,iBAAK,GAAL,CAAS,YAAT,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC;;AAEA;AACA;AACA,iBAAK,GAAL,CAAS,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAK,MAAL,CAAY,KAArC,EAA4C,KAAK,MAAL,CAAY,MAAxD;;AAEA,iBAAK,GAAL,CAAS,SAAT,CAAmB,CAAC,KAAK,MAAL,CAAY,KAAZ,GAAoB,KAAK,KAA1B,IAAmC,CAAtD,EAAyD,CAAC,KAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,MAA3B,IAAqC,CAA9F;;AAEA,iBAAK,GAAL,CAAS,SAAT,GAAqB,0BAArB;AACA,iBAAK,GAAL,CAAS,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAK,KAA7B,EAAoC,KAAK,MAAzC;;AAEA,iBAAK,GAAL,CAAS,IAAT;;AAEA;AACA;AACA,iBAAK,GAAL,CAAS,KAAT,CAAe,KAAK,MAAL,GAAc,UAA7B,EAAyC,CAAC,CAAD,GAAK,KAAK,MAAV,GAAmB,UAA5D;AACA,iBAAK,GAAL,CAAS,SAAT,CAAmB,CAAnB,EAAsB,CAAC,CAAD,GAAK,UAA3B;AAEH;;;mCAEU;AACP,iBAAK,GAAL,CAAS,OAAT;;AAEA,gBAAM,MAAM,KAAK,GAAL,EAAZ;AACA,iBAAK,GAAL,CAAS,SAAT,GAAqB,SAArB;AACA,iBAAK,GAAL,CAAS,SAAT,GAAqB,OAArB;AACA,iBAAK,GAAL,CAAS,IAAT,GAAgB,iBAAhB;;AAEA,iBAAK,GAAL,GAAW,KAAK,GAAL,GAAW,GAAX,GAAiB,CAAC,MAAM,KAAK,aAAZ,IAA6B,GAAzD;AACA,iBAAK,GAAL,CAAS,QAAT,WAA0B,KAAK,KAAL,CAAW,OAAO,KAAK,GAAvB,CAA1B,EAAyD,KAAK,KAAL,GAAa,EAAtE,EAA0E,EAA1E;;AAEA,iBAAK,aAAL,GAAqB,GAArB;AAGH;;;gCAEO;AACJ,mBAAO,qBAAP,CAA6B,KAAK,QAAlC;AACA,mBAAO,gBAAP,CAAwB,QAAxB,EAAkC,KAAK,YAAvC;AACA,iBAAK,YAAL;AACH;;;+BAEM;AACH,iBAAK,QAAL,GAAgB,IAAhB;AACA,mBAAO,mBAAP,CAA2B,QAA3B,EAAqC,KAAK,YAA1C;AACH;;;;;;AAGL,IAAM,IAAI,IAAI,QAAJ,CAAa,MAAb,CAAV;AACA,EAAE,KAAF","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nconst canvas = document.getElementById('gameCanvas-layer0');\n\n// 1.6:1 aspect ratio\nconst ASPECT_RATIO = 1.6/1;\nconst UNITS_TALL = 20;\n\nclass Renderer {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n        this.stopping = false;\n\n        this.gameLoop = this.gameLoop.bind(this);\n        this.resizeCanvas = this.resizeCanvas.bind(this);\n        this.lastFrameTime = Date.now();\n        this.FPS = 0;\n    }\n\n    resizeCanvas() {\n        this.width = canvas.clientWidth;\n        this.height = canvas.clientHeight;\n\n        this.canvas.width = this.width;\n        this.canvas.height = this.height;\n\n        if (canvas.height) {\n            const ratio = this.width / this.height;\n\n            if (ratio > ASPECT_RATIO) {\n                // Too wide\n                this.width = ASPECT_RATIO * this.height;\n            } else {\n                // Too thin\n                this.height = this.width / ASPECT_RATIO;\n            }\n        }\n    }\n\n    gameLoop() {\n        this.preDraw();\n\n        this.ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n        this.ctx.fillRect(0, 0, 1, 1);\n        this.ctx.fillRect(UNITS_TALL*ASPECT_RATIO - 1, UNITS_TALL - 1, 1, 1);\n\n\n        this.postDraw();\n\n        if (!this.stopping) {\n            window.requestAnimationFrame(this.gameLoop);\n        } else {\n            this.stopping = false;\n        }\n    }\n\n    preDraw() {\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n\n        // This probably won't be needed once we start drawing\n        //  a proper background\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n        this.ctx.translate((this.canvas.width - this.width) / 2, (this.canvas.height - this.height) / 2);\n\n        this.ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\n        this.ctx.fillRect(0, 0, this.width, this.height);\n\n        this.ctx.save();\n\n        // 20 units tall, origin starts in bottom left\n        //  positive y goes up\n        this.ctx.scale(this.height / UNITS_TALL, -1 * this.height / UNITS_TALL);\n        this.ctx.translate(0, -1 * UNITS_TALL);\n\n    }\n\n    postDraw() {\n        this.ctx.restore();\n\n        const now = Date.now();\n        this.ctx.fillStyle = '#000000';\n        this.ctx.textAlign = 'right';\n        this.ctx.font = '16px sans-serif';\n\n        this.FPS = this.FPS * 0.9 + (now - this.lastFrameTime) * 0.1;\n        this.ctx.fillText(`FPS: ${Math.round(1000 / this.FPS)}`, this.width - 10, 16);\n\n        this.lastFrameTime = now;\n\n\n    }\n\n    start() {\n        window.requestAnimationFrame(this.gameLoop);\n        window.addEventListener('resize', this.resizeCanvas);\n        this.resizeCanvas();\n    }\n\n    stop() {\n        this.stopping = true;\n        window.removeEventListener('resize', this.resizeCanvas);\n    }\n}\n\nconst r = new Renderer(canvas);\nr.start();\n"]}